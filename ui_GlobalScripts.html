<script>
  /**
   *  Carga una vista din谩mica en el contenedor principal.
   * Si la vista es 'usuarios_UsuariosView', ejecuta su inicializaci贸n espec铆fica.
   * @param {string} nombreVista - Nombre del m贸dulo a cargar
   */
  function abrirModulo(nombreVista) {
    mostrarModalCarga(); //  Abre el modal de carga

    google.script.run.withSuccessHandler(function (html) {
      document.getElementById("contenedorModulo").innerHTML = html;

      setTimeout(() => {
        //  Inicializaci贸n espec铆fica por vista
        switch (nombreVista) {
          case 'usuarios_UsuariosView':
            cargarUsuarios((usuarios) => {
              inicializarVistaUsuarios(usuarios);

              // Activar bot贸n para abrir el formulario de agregar usuario
              const btnAbrir = document.getElementById('tabAddUsuario');
              if (btnAbrir) {
                btnAbrir.addEventListener('click', () => {
                  abrirModulo('usuarios_FormularioAgregar');
                  document.getElementById('usuarios-lista').style.display = 'none';
                  document.getElementById('addUsuarioContent').style.display = 'block';
                });
              }
            });
            break;

          case 'usuarios_FormularioAgregar':
            // Aqu铆 puedes agregar l贸gica si el formulario requiere datos previos
            // Por ejemplo: cargarMaterias(), cargarEstudiantes(), etc.
            ocultarModalCarga();
            break;

          case 'registro_RegistroView':
            inicializarVistaRegistro(); // Llama a la funci贸n que asigna los eventos a los botones
            ocultarModalCarga();
            break;

          case 'conducta_ConductaView':
            inicializarVistaConducta();
            break;

          default:
            ocultarModalCarga(); //  Para vistas que no requieren inicializaci贸n especial
            break;
        }
      }, 50);
    }).abrirModuloGS(nombreVista);
  }

  function mostrarModalCarga() {
    const modal = document.getElementById('modalCarga');
    if (modal) modal.style.display = 'flex';
  }

  function ocultarModalCarga() {
    const modal = document.getElementById('modalCarga');
    if (modal) modal.style.display = 'none';
  }
/**
 * Muestra una alerta general con SweetAlert2.
 * @param {'success'|'error'|'warning'|'info'|'question'} icon - Tipo de icono.
 * @param {string} title - T铆tulo de la alerta.
 * @param {string} text - Texto descriptivo.
 * @param {string} [confirmText='OK'] - Texto del bot贸n de confirmaci贸n.
 */
function mostrarAlerta(icon, title, text, confirmText = 'OK') {
  Swal.fire({
    icon: icon,
    title: title,
    text: text,
    confirmButtonText: confirmText
  });
}
</script>